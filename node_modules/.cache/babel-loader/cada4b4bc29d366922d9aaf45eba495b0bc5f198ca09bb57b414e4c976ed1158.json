{"ast":null,"code":"import { createAction, createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"../axiosURL.js\";\nexport const loadDays = createAsyncThunk(\"fitness/loadDays\", async data => {\n  console.log(\"Data\", data);\n  const res = await axios.get(`/fitness/day/${data.profileId}/${data.date}`, {\n    withCredentials: true\n  });\n  console.log(\"Reducer\", res.data);\n  return res.data;\n});\nexport const updateDay = createAction(\"fitness/updateDay\");\nexport const createDay = createAction(\"fitness/createDay\");\nconst initialState = {\n  day: []\n};\nconst dayReducer = createReducer(initialState, builder => {\n  builder.addCase(loadDays.fulfilled, (state, action) => {\n    return {\n      ...state,\n      day: action.payload\n    };\n  }).addCase(createDay, (state, action) => {\n    const dayCopy = [...state.day];\n    const newDay = {\n      date: action.payload.date,\n      food: [action.payload.foodId, action.payload.amount],\n      exercise: [action.payload.exerciseId, action.payload.timeInMinutes],\n      profileId: action.payload.profileId\n    };\n    dayCopy.push(newDay);\n    return {\n      ...state,\n      day: dayCopy\n    };\n  }).addCase(updateDay, (state, action) => {\n    const exerciseIndex = state.exercise.findIndex(t => t._id === action.payload.exerciseId);\n    const exerciseCopy = {\n      ...state.exercise[exerciseIndex]\n    };\n    const {\n      exerciseId,\n      ...rest\n    } = action.payload;\n    Object.assign(exerciseCopy, rest);\n    const exerciseArrayCopy = [...state.exercise];\n    exerciseArrayCopy[exerciseIndex] = exerciseCopy;\n    return {\n      ...state,\n      exercise: exerciseArrayCopy\n    };\n  });\n});\nexport default dayReducer;","map":{"version":3,"names":["createAction","createReducer","createAsyncThunk","axios","loadDays","data","console","log","res","get","profileId","date","withCredentials","updateDay","createDay","initialState","day","dayReducer","builder","addCase","fulfilled","state","action","payload","dayCopy","newDay","food","foodId","amount","exercise","exerciseId","timeInMinutes","push","exerciseIndex","findIndex","t","_id","exerciseCopy","rest","Object","assign","exerciseArrayCopy"],"sources":["/home/brezerda/Projects/Repos/fitness_app/src/Reducer/day.reducer.js"],"sourcesContent":["import {createAction, createReducer, createAsyncThunk} from \"@reduxjs/toolkit\";\nimport axios from \"../axiosURL.js\";\n\nexport const loadDays = createAsyncThunk(\"fitness/loadDays\", async (data) => {\n    console.log(\"Data\", data)\n    const res = await axios.get(`/fitness/day/${data.profileId}/${data.date}`, {withCredentials: true})\n    console.log(\"Reducer\", res.data)\n    return res.data\n});\n\nexport const updateDay = createAction(\"fitness/updateDay\")\nexport const createDay = createAction(\"fitness/createDay\")\n\nconst initialState = {\n    day: []\n};\n\nconst dayReducer = createReducer(initialState, (builder) => {\n    builder.addCase(loadDays.fulfilled, (state, action) => {\n        return{\n            ...state,\n            day: action.payload\n        }\n    })\n    .addCase(createDay, (state, action) => {\n        const dayCopy = [...state.day]\n        const newDay = {\n            date: action.payload.date, \n            food: [\n                action.payload.foodId,\n                action.payload.amount\n                ],\n            exercise: [\n                action.payload.exerciseId,\n                action.payload.timeInMinutes\n            ],\n            profileId: action.payload.profileId \n        }\n        dayCopy.push(newDay)\n        return {\n            ...state,\n            day: dayCopy\n        }\n    })\n    .addCase(updateDay, (state, action) => {\n        const exerciseIndex = state.exercise.findIndex(t => t._id === action.payload.exerciseId)\n        const exerciseCopy = {...state.exercise[exerciseIndex]}\n        const { exerciseId, ...rest } = action.payload;\n        Object.assign(exerciseCopy, rest);\n        const exerciseArrayCopy = [...state.exercise]\n        exerciseArrayCopy[exerciseIndex] = exerciseCopy\n        return{\n            ...state,\n            exercise: exerciseArrayCopy \n        }\n    })\n});\n\nexport default dayReducer;"],"mappings":"AAAA,SAAQA,YAAY,EAAEC,aAAa,EAAEC,gBAAgB,QAAO,kBAAkB;AAC9E,OAAOC,KAAK,MAAM,gBAAgB;AAElC,OAAO,MAAMC,QAAQ,GAAGF,gBAAgB,CAAC,kBAAkB,EAAE,MAAOG,IAAI,IAAK;EACzEC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEF,IAAI,CAAC;EACzB,MAAMG,GAAG,GAAG,MAAML,KAAK,CAACM,GAAG,CAAE,gBAAeJ,IAAI,CAACK,SAAU,IAAGL,IAAI,CAACM,IAAK,EAAC,EAAE;IAACC,eAAe,EAAE;EAAI,CAAC,CAAC;EACnGN,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEC,GAAG,CAACH,IAAI,CAAC;EAChC,OAAOG,GAAG,CAACH,IAAI;AACnB,CAAC,CAAC;AAEF,OAAO,MAAMQ,SAAS,GAAGb,YAAY,CAAC,mBAAmB,CAAC;AAC1D,OAAO,MAAMc,SAAS,GAAGd,YAAY,CAAC,mBAAmB,CAAC;AAE1D,MAAMe,YAAY,GAAG;EACjBC,GAAG,EAAE;AACT,CAAC;AAED,MAAMC,UAAU,GAAGhB,aAAa,CAACc,YAAY,EAAGG,OAAO,IAAK;EACxDA,OAAO,CAACC,OAAO,CAACf,QAAQ,CAACgB,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;IACnD,OAAM;MACF,GAAGD,KAAK;MACRL,GAAG,EAAEM,MAAM,CAACC;IAChB,CAAC;EACL,CAAC,CAAC,CACDJ,OAAO,CAACL,SAAS,EAAE,CAACO,KAAK,EAAEC,MAAM,KAAK;IACnC,MAAME,OAAO,GAAG,CAAC,GAAGH,KAAK,CAACL,GAAG,CAAC;IAC9B,MAAMS,MAAM,GAAG;MACXd,IAAI,EAAEW,MAAM,CAACC,OAAO,CAACZ,IAAI;MACzBe,IAAI,EAAE,CACFJ,MAAM,CAACC,OAAO,CAACI,MAAM,EACrBL,MAAM,CAACC,OAAO,CAACK,MAAM,CACpB;MACLC,QAAQ,EAAE,CACNP,MAAM,CAACC,OAAO,CAACO,UAAU,EACzBR,MAAM,CAACC,OAAO,CAACQ,aAAa,CAC/B;MACDrB,SAAS,EAAEY,MAAM,CAACC,OAAO,CAACb;IAC9B,CAAC;IACDc,OAAO,CAACQ,IAAI,CAACP,MAAM,CAAC;IACpB,OAAO;MACH,GAAGJ,KAAK;MACRL,GAAG,EAAEQ;IACT,CAAC;EACL,CAAC,CAAC,CACDL,OAAO,CAACN,SAAS,EAAE,CAACQ,KAAK,EAAEC,MAAM,KAAK;IACnC,MAAMW,aAAa,GAAGZ,KAAK,CAACQ,QAAQ,CAACK,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKd,MAAM,CAACC,OAAO,CAACO,UAAU,CAAC;IACxF,MAAMO,YAAY,GAAG;MAAC,GAAGhB,KAAK,CAACQ,QAAQ,CAACI,aAAa;IAAC,CAAC;IACvD,MAAM;MAAEH,UAAU;MAAE,GAAGQ;IAAK,CAAC,GAAGhB,MAAM,CAACC,OAAO;IAC9CgB,MAAM,CAACC,MAAM,CAACH,YAAY,EAAEC,IAAI,CAAC;IACjC,MAAMG,iBAAiB,GAAG,CAAC,GAAGpB,KAAK,CAACQ,QAAQ,CAAC;IAC7CY,iBAAiB,CAACR,aAAa,CAAC,GAAGI,YAAY;IAC/C,OAAM;MACF,GAAGhB,KAAK;MACRQ,QAAQ,EAAEY;IACd,CAAC;EACL,CAAC,CAAC;AACN,CAAC,CAAC;AAEF,eAAexB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}